# シリアルコマンド仕様書

このドキュメントは、rovate_Bipedal_TYPE-A プロジェクトのシリアル通信コマンド一覧と使用例をまとめたものです。

## 基本仕様
- 通信方式: UART2 (デフォルト 921600bps)
- 改行(\r, \n)でコマンド区切り
- 1文字コマンド、JSONコマンド両対応

## コマンド一覧と使用例

### 1. 通信確認（pong応答）
- コマンド: `p`
- 例: `p` (改行送信)
- 応答: `pong`

### 2. 通信確認（JSON）
- コマンド: `{ "cmd": "ping" }`
- 例: `{ "cmd": "ping" }` (改行送信)
- 応答: `{ "resp": "pong", "millis": <現在のミリ秒> }`

### 3. サーボ一括制御
- コマンド: `{ "cmd": "servo", "pos": [1500,1500,1500,1500,1500,1500,1500,1500] }`
- 例: `{ "cmd": "servo", "pos": [1500,1500,1500,1500,1500,1500,1500,1500] }`
- 応答: なし

### 4. サーボオフセット一括設定
- コマンド: `{ "cmd": "offset", "off": [0,0,0,0,0,0,0,0] }`
- 例: `{ "cmd": "offset", "off": [0,0,0,0,0,0,0,0] }`
- 応答: なし

### 5. 単一サーボ制御
- コマンド: `{ "cmd": "set", "id": 0, "val": 1500 }`
- 例: `{ "cmd": "set", "id": 0, "val": 1500 }`
- 応答: なし

### 6. サーボ全リセット
- コマンド: `{ "cmd": "reset" }`
- 例: `{ "cmd": "reset" }`
- 応答: なし

### 7. コマンド説明表示
- コマンド: `?`
- 例: `?` (改行送信)
- 応答: コマンド一覧と使用例を表示

## 注意事項
- 1コマンドごとに改行(\r, \n)が必要です。
- JSONコマンドはダブルクォートで記述してください。
- 不正なコマンドやJSONパースエラー時は応答しません。

---

最終更新: 2026-01-26
